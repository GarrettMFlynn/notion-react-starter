(this["webpackJsonpnotion-react-starter"]=this["webpackJsonpnotion-react-starter"]||[]).push([[0],{101:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=101},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(82),i=n(14),l=n(21),o=n(11),s=n(84),u=n(85),m=n.n(u),f=new s.Notion({autoSelectDevice:!1}),d={selectedDevice:null,status:null,user:null,loadingUser:!0},b=Object(a.createContext)(),v=function(){return Object(a.useContext)(b)};function O(e){var t=e.children,n=function(){var e=m()("deviceId"),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(Object(l.a)({},d)),i=Object(o.a)(r,2),s=i[0],u=i[1],b=s.user,v=s.selectedDevice,O=Object(a.useCallback)((function(e){u((function(t){return Object(l.a)(Object(l.a)({},t),{},{selectedDevice:e})}))}),[]);Object(a.useEffect)((function(){b&&!v&&f.selectDevice((function(e){return n?e.find((function(e){return e.deviceId===n})):e[0]}))}),[b,n,v]),Object(a.useEffect)((function(){if(v){var e=f.status().subscribe((function(e){u((function(t){return Object(l.a)(Object(l.a)({},t),{},{status:e})}))}));return function(){e.unsubscribe()}}}),[v]),Object(a.useEffect)((function(){u((function(e){return Object(l.a)(Object(l.a)({},e),{},{loadingUser:!0})}));var e=f.onAuthStateChanged().subscribe((function(e){u((function(t){return Object(l.a)(Object(l.a)({},t),{},{user:e,loadingUser:!1})}))}));return function(){e.unsubscribe()}}),[]),Object(a.useEffect)((function(){var e=f.onDeviceChange().subscribe((function(e){O(e),c(e.deviceId)}));return function(){e.unsubscribe()}}),[O,c]);var E=Object(a.useCallback)((function(){return new Promise((function(e){f.logout().then(e),u(Object(l.a)(Object(l.a)({},d),{},{loadingUser:!1}))}))}),[]);return Object(l.a)(Object(l.a)({},s),{},{lastSelectedDeviceId:n,setLastSelectedDeviceId:c,logoutNotion:E,setSelectedDevice:O})}();return c.a.createElement(b.Provider,{value:n},t)}function E(){var e=v(),t=e.user,n=e.lastSelectedDeviceId,r=Object(a.useState)([]),l=Object(o.a)(r,2),s=l[0],u=l[1],m=Object(a.useState)(""),d=Object(o.a)(m,2),b=d[0],O=d[1],E=Object(a.useState)(!0),g=Object(o.a)(E,2),j=g[0],p=g[1],h=Object(a.useState)(!1),N=Object(o.a)(h,2),w=N[0],S=N[1],y=Object(a.useState)(""),C=Object(o.a)(y,2),D=C[0],k=C[1];return Object(a.useEffect)((function(){t&&!w&&(p(!0),f.getDevices().then((function(e){u(e),e.length&&O(n||e[0].deviceId)})).catch((function(e){k(e.message)})).finally((function(){p(!1)})))}),[t,n,w]),c.a.createElement("main",{className:"main-container"},c.a.createElement("form",{className:"card login-form",onSubmit:function(e){e.preventDefault(),S(!0),f.selectDevice((function(e){return e.find((function(e){return e.deviceId===b}))})).then((function(){Object(i.c)("/")})).catch((function(e){k(e.message)}))}},c.a.createElement("h3",{className:"card-heading"},"Devices"),D?c.a.createElement("h4",{className:"card-error"},D):null,c.a.createElement("div",{className:"row"},c.a.createElement("label",null,"Select a Device"),c.a.createElement("select",{name:"deviceSelect",value:b,disabled:j,onChange:function(e){return O(e.target.value)}},s.map((function(e){return c.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.deviceNickname||e.modelName)})))),c.a.createElement("div",{className:"row"},c.a.createElement("button",{type:"submit",className:"card-btn",disabled:j},j?"Loading Devices...":"Select"))))}function g(){return c.a.createElement("div",{className:"loading-container"},c.a.createElement("div",{className:"loading-spinner"}))}var j=n(34),p=n.n(j),h=n(50),N=n(72),w=n.n(N);function S(e){var t=e.onLogin,n=e.loading,r=e.error,i=e.footerComponent,l=Object(a.useState)(""),s=Object(o.a)(l,2),u=s[0],m=s[1],f=Object(a.useState)(""),d=Object(o.a)(f,2),b=d[0],v=d[1];return c.a.createElement("form",{className:"card login-form",onSubmit:function(e){e.preventDefault(),t({email:u,password:b})}},c.a.createElement("h3",{className:"card-heading"},"Login"),r?c.a.createElement("h4",{className:"card-error"},r):null,c.a.createElement("div",{className:"row"},c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",value:u,disabled:n,onChange:function(e){return m(e.target.value)}})),c.a.createElement("div",{className:"row"},c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",value:b,disabled:n,onChange:function(e){return v(e.target.value)}})),c.a.createElement("div",{className:"row"},c.a.createElement("button",{type:"submit",className:"card-btn",disabled:n},n?"Logging in...":"Login")),i)}function y(){return c.a.createElement("footer",{className:"card-footer"},c.a.createElement("a",{className:"card-link card-footer-cta",href:"https://github.com/neurosity/notion-react-starter",target:"_blank",rel:"noopener noreferrer"},"View source code"),c.a.createElement("div",{className:"card-footer-credits"},"Built by"," ",c.a.createElement("a",{className:"card-link",href:"https://neurosity.co",target:"_blank",rel:"noopener noreferrer"},"Neurosity")))}function C(){var e=v(),t=e.user,n=e.lastSelectedDeviceId,r=e.setSelectedDevice,l=Object(a.useState)(""),s=Object(o.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)(""),b=Object(o.a)(d,2),O=b[0],E=b[1],g=Object(a.useState)(""),j=Object(o.a)(g,2),N=j[0],C=j[1],D=Object(a.useState)(!1),k=Object(o.a)(D,2),I=k[0],x=k[1];function L(){C(""),m(""),E("")}return w()((function(){t&&Object(i.c)("/")})),Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,f.login({email:u,password:O}).catch((function(e){C(e.message)}));case 3:e.sent&&(L(),n?Object(i.c)("/"):Object(i.c)("/devices")),x(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u&&O&&function(){e.apply(this,arguments)}()}),[u,O,C,n,r]),c.a.createElement("main",{className:"main-container"},c.a.createElement(S,{onLogin:function(e){var t=e.email,n=e.password;t&&n?(C(""),m(t),E(n)):C("Please fill the form")},error:N,loading:I,footerComponent:c.a.createElement(y,null)}))}function D(){var e=v().logoutNotion;return Object(a.useEffect)((function(){e().then((function(){Object(i.c)("/")}))}),[e]),null}var k={booting:"Starting OS...",shuttingOff:"Shutting off...",updating:"Updating OS...",online:"Online",offline:"Offline"},I={booting:"darkslategrey",shuttingOff:"darkslategrey",updating:"orange",online:"limegreen",offline:"crimson"};function x(){var e=v(),t=e.status,n=e.selectedDevice,a=t||{},r=a.state,l=a.charging,o=a.battery,s=a.sleepMode;return t?c.a.createElement("aside",null,n?c.a.createElement("h3",{className:"card-heading"},c.a.createElement(i.a,{to:"/devices",title:"My Devices",className:"unstyled-link"},c.a.createElement("span",{role:"img","aria-label":"My Devices"},"\u2699\ufe0f"),"\xa0\xa0",n.deviceNickname)):null,c.a.createElement("div",{className:"status-item status-state"},c.a.createElement("span",{className:"status-indicator",style:{background:L(r)}}),r in k?k[r]:r),"offline"!==r?c.a.createElement("div",{className:"status-item status-battery"},c.a.createElement(M,null)," \xa0",l?"Charging":"Charged","\xa0",o,"%"):null,s&&"offline"!==r?c.a.createElement("div",{className:"status-item status-sleep-mode"},c.a.createElement(U,null)," \xa0Sleep mode"):null):c.a.createElement("div",null,"Connecting to device...")}function L(e){return e in I?I[e]:I.offline}function M(){return c.a.createElement("span",{role:"img","aria-label":"Electricity"},"\u26a1")}function U(){return c.a.createElement("span",{role:"img","aria-label":"The Moon"},"\ud83c\udf19")}function P(){return c.a.createElement("nav",{className:"card"},c.a.createElement(x,null),c.a.createElement("button",{onClick:function(){Object(i.c)("/logout")},className:"card-btn"},"Logout"),c.a.createElement(y,null))}function _(){var e=v().user,t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],l=n[1];return Object(a.useEffect)((function(){e||Object(i.c)("/login")}),[e]),Object(a.useEffect)((function(){if(e){var t=f.calm().subscribe((function(e){var t=Math.trunc(100*e.probability);l(t)}));return function(){t.unsubscribe()}}}),[e]),c.a.createElement("main",{className:"main-container"},e?c.a.createElement(P,null):null,c.a.createElement("div",{className:"calm-score"},"\xa0",r,"% ",c.a.createElement("div",{className:"calm-word"},"Calm")))}var B=n(86);function T(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.museClient.connect();case 2:window.museClient.start(),t=window.channelNames.indexOf("AF7"),console.log(window.museClient.eegReadings),window.museClient.eegReadings.subscribe((function(e){var n;e.electrode===t&&(n=Math.max.apply(Math,Object(B.a)(e.samples.map((function(e){return Math.abs(e)})))),console.log(n),document.getElementById("muse-readout").innerHTML=n>500?"blink":"None")}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",{id:"muse-container"},c.a.createElement("div",{id:"muse-readout"},"None"),c.a.createElement("button",{id:"connect-button",onClick:function(){return e.apply(this,arguments)}},"Connect"))}function A(){var e=v(),t=e.user,n=e.lastSelectedDeviceId,r=e.setSelectedDevice,l=Object(a.useState)(""),s=Object(o.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)(""),b=Object(o.a)(d,2),O=b[0],E=b[1],g=Object(a.useState)(""),j=Object(o.a)(g,2),N=j[0],S=j[1],C=Object(a.useState)(!1),D=Object(o.a)(C,2),k=D[0],I=D[1];function x(){S(""),m(""),E("")}return w()((function(){t&&Object(i.c)("/")})),Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,f.login({email:u,password:O}).catch((function(e){S(e.message)}));case 3:e.sent&&(x(),n?Object(i.c)("/"):Object(i.c)("/devices")),I(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u&&O&&function(){e.apply(this,arguments)}()}),[u,O,S,n,r]),c.a.createElement("main",{className:"main-container"},c.a.createElement(T,{onLogin:function(e){var t=e.email,n=e.password;t&&n?(S(""),m(t),E(n)):S("Please fill the form")},error:N,loading:k,footerComponent:c.a.createElement(y,null)}))}var F=n(73);function J(){return c.a.createElement(O,null,c.a.createElement(R,null))}function R(){var e=v(),t=e.user,n=e.loadingUser;return Object(a.useEffect)((function(){n||t||Object(i.c)("/muse")}),[t,n]),n?c.a.createElement(g,null):c.a.createElement(i.b,null,c.a.createElement(_,{path:"/"}),c.a.createElement(E,{path:"/devices"}),c.a.createElement(C,{path:"/login"}),c.a.createElement(A,{path:"/muse"}),c.a.createElement(D,{path:"/logout"}))}window.museClient=new F.MuseClient,window.channelNames=F.channelNames;n(106);Object(r.render)(c.a.createElement(J,null),document.getElementById("root"))},87:function(e,t,n){e.exports=n(107)}},[[87,1,2]]]);
//# sourceMappingURL=main.afa4a5a7.chunk.js.map